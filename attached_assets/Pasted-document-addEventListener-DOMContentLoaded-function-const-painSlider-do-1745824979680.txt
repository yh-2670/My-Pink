document.addEventListener('DOMContentLoaded', function() {
    // 요소 가져오기 
    const painSlider = document.getElementById('painSlider');
    const painLevel = document.getElementById('painLevel');
    const sliderProgress = document.querySelector('.slider-progress');
    const recommendationTitle = document.querySelector('.recommendation-title');
    const recommendationList = document.querySelector('.recommendation-list');
    const actionButton = document.querySelector('.action-button');
    
    // 설명을 리스트 내에 저장 
    const painLevels = [
      { // Level 0
        title: "통증 없음 (단계 0/10)",
        symptoms: [
          "• 특별한 통증이 없어요",
          "• 평소와 같은 컨디션이에요",
          "• 약을 복용할 필요가 없어요"
        ]
      },
      { // Level 1-3
        title: "약한 통증 (단계 1-3/10)",
        symptoms: [
          "• 허리가 약간 뻐근해요",
          "• 배가 살짝 콕콕거려요",
          "• 일상생활에 지장은 없어요",
          "• 간혹 피곤함을 느껴요"
        ]
      },
      { // Level 4-6
        title: "중간 통증 (단계 4-6/10)",
        symptoms: [
          "• 허리가 뻐근해요",
          "• 배가 살짝 콕콕거려요",
          "• 일상생활이 약간 불편해요",
          "• 피로감이 느껴져요",
          "• 진통제가 필요할 수 있어요"
        ]
      },
      { // Level 7-10
        title: "심한 통증 (단계 7-10/10)",
        symptoms: [
          "• 허리와 아랫배가 매우 아파요",
          "• 움직이기 어려워요",
          "• 일상생활이 힘들어요",
          "• 메스꺼움이나 구토가 있을 수 있어요",
          "• 처방된 진통제가 필요해요"
        ]
      }
    ];

    // 텍스트 업데이트 
    function updateRecommendation(value) {
      //값 가져오기 
      painLevel.textContent = value;

      // Progress 업데이트 
      const percentage = (value / 10) * 100;
      sliderProgress.style.width = `${percentage}%`; 

      // 카테고리 바꾸기 
      // !! value가 0 이면, levelIndex 도 0
      // 1~ 3 사이면 1, 
      // 4 ~ 6 사이면 2
      // 그 외 3 
      if (value == 0) {
        levelIndex = 0
      }
      else if (value >= 1 && value <= 3) {
        levelIndex = 1
      }
      else if (value >= 4 && value <= 6) {
        levelIndex = 2
      }
      else {
        levelIndex = 3
      }
      

      // 텍스트 바꾸기 
      const level = painLevels[levelIndex];
      recommendationTitle.innerHTML = level.title.replace(/단계\s\d+(-\d+)?\/10/, `단계 <span id="painLevel">${value}</span>/10`);
    
      //리스트 값 변경
      recommendationList.innerHTML = '';
      level.symptoms.forEach(symptom => {
        const li = document.createElement('li');
        li.textContent = symptom;
        recommendationList.appendChild(li);
      });
    }

  //슬라이더 값 업데이트 
  updateRecommendation(painSlider.value);

  // 이벤트 리스너 추가 --> 이벤트 리스너란? 
  painSlider.addEventListener('input', function() {
    updateRecommendation(this.value);
    
  });



  actionButton.addEventListener('click', function() {
    const painValue = parseInt(painSlider.value);
    let message;

    if (painValue === 0) {
      message = "통증이 없어서 다행이네요! 약이 필요하지 않습니다.";
    } else if (painValue >= 1 && painValue <= 3) {
      message = "약한 통증이군요. 따뜻한 물을 마시고 쉬는 것이 좋습니다. 필요하다면 이부프로펜이나 아세트아미노펜과 같은 약한 진통제가 도움이 될 수 있어요.";
    } else if (painValue >= 4 && painValue <= 6) {
      message = "중간 정도의 통증이네요. 이부프로펜(예: 애드빌)이나 나프록센(예: 알레브)과, 같은 비스테로이드성 항염증제(NSAIDs)가 효과적일 수 있습니다. 따뜻한 찜질도 도움이 됩니다.";
    } else {
      message = "심한 통증을 겪고 계시는군요. 처방된 강한 진통제나 복합 진통제가 필요할 수 있습니다. 증상이 지속되면 의사와 상담하는 것이 좋습니다.";
    }

    alert(message);
  });
  });
